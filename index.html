<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Progressive Overload Tracker</title>
<style>
:root{--bg:#0f1724;--card:#0b1220;--muted:#94a3b8;--accent:#10b981}
body{margin:0;font-family:sans-serif;color:#e6eef6;background:var(--bg)}
.app{max-width:480px;margin:auto;padding:10px}
h1{font-size:18px;margin:0}
.header{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}
.controls{display:flex;gap:6px;align-items:center;flex-wrap:wrap;margin-top:6px}
.btn{background:var(--card);border:1px solid rgba(255,255,255,0.08);padding:6px 10px;border-radius:8px;font-size:14px;color:#e6eef6;cursor:pointer}
.btn.primary{background:linear-gradient(90deg,#06b6d4,#0ea5a4);color:#022;font-weight:600}
.day-btn{padding:8px;border-radius:8px;background:rgba(255,255,255,0.04);margin-bottom:6px;cursor:pointer}
.day-btn.active{outline:2px solid var(--accent);background:rgba(16,185,129,0.1)}
.exercise{border:1px solid rgba(255,255,255,0.06);border-radius:10px;padding:8px;margin-bottom:10px;background:rgba(255,255,255,0.02)}
.ex-head{display:flex;justify-content:space-between;font-size:14px;margin-bottom:6px}
.set-row{display:grid;grid-template-columns:32px 1fr 1fr;gap:6px;align-items:center;margin-bottom:4px;font-size:13px}
.input{padding:5px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);background:transparent;color:inherit;font-size:13px}
.small{font-size:12px;color:var(--muted)}
.footer-note{font-size:12px;color:var(--muted);margin-top:8px}
  style>
</head>
<body>
<div class="app">
  <div class="header">
    <h1>Progressive Overload</h1>
    <div class="controls">
      <button class="btn" id="prevWeek">◀</button>
      <div class="small">Week <strong id="weekNum">1</strong></div>
      <button class="btn" id="nextWeek">▶</button>
      <button class="btn primary" id="newWeek">New Week</button>
    </div>
  </div>
  <div id="dayList"></div>
  <div id="panel"></div>
  <div class="footer-note">Warm-up + 2 sets (weeks 1-2), 3 sets (week 3+). Data is saved locally.</div>
  <div class="controls" style="justify-content:center;margin-top:6px">
    <button class="btn" id="exportBtn">Export CSV</button>
    <input type="file" id="importBtn" accept=".json" class="btn" style="padding:6px 2px;font-size:12px">
  </div>
</div>

<script>
const EXS=[
{id:"RDL",day:"Lower 1",name:"RDL",range:"8-10"},
{id:"LegPress",day:"Lower 1",name:"Leg Press",range:"8-12"},
{id:"LegCurl",day:"Lower 1",name:"Lying Leg Curl",range:"8-12"},
{id:"Calf",day:"Lower 1",name:"Standing Calf",range:"8-12"},
{id:"Crunch",day:"Lower 1",name:"Cable/Machine Crunch",range:"8-12"},
  {id:"DBBench",day:"Upper",name:"DB Bench",range:"8-10"},
{id:"VBarRow",day:"Upper",name:"V-Bar Row",range:"8-12"},
{id:"Incline",day:"Upper",name:"Incline DB Bench",range:"8-12"},
{id:"DBCurl",day:"Upper",name:"DB Curl",range:"8-12"},
{id:"TriExt",day:"Upper",name:"OH Rope Tricep",range:"8-12"},
{id:"RearDelt",day:"Upper",name:"Rear Delt / Pec Deck",range:"8-12"},
{id:"SmithSq",day:"Lower 2",name:"Smith High Bar Squat",range:"8-10"},
{id:"SeatCurl",day:"Lower 2",name:"Seated Leg Curl",range:"8-12"},
{id:"LegExt",day:"Lower 2",name:"Leg Ext",range:"8-12"},
{id:"SeatCalf",day:"Lower 2",name:"Seated Calf",range:"8-15"},
{id:"Crunch2",day:"Lower 2",name:"Cable/Machine Crunch",range:"8-12"},
{id:"HipThrust",day:"Full Body",name:"Hip Thrust",range:"8-10"},
{id:"ChestRow",day:"Full Body",name:"Chest Supported Row",range:"8-12"},
{id:"Lunge",day:"Full Body",name:"Walking Lunges",range:"6-8"},
{id:"MachBench",day:"Full Body",name:"Machine Bench",range:"8-12"},
{id:"LatPull",day:"Full Body",name:"Lat Pulldown",range:"8-12"},
{id:"TriPush",day:"Full Body",name:"Rope Tricep Push",range:"8-12"},
{id:"Hammer",day:"Full Body",name:"DB Hammer Curl",range:"8-12"},
{id:"FacePull",day:"Full Body",name:"Cable Face Pull",range:"8-12"}
];
const STORAGE="plTrackerLogs", META="plTrackerMeta";
let logs=JSON.parse(localStorage.getItem(STORAGE)||"{}");
let meta=JSON.parse(localStorage.getItem(META)||"{\"week\":1}");
let week=meta.week||1;
let activeDay="Lower 1";

const days=["Lower 1","Upper","Lower 2","Full Body"];
const dayList=document.getElementById("dayList");
const panel=document.getElementById("panel");
const weekNum=document.getElementById("weekNum");

function save(){localStorage.setItem(STORAGE,JSON.stringify(logs));localStorage.setItem(META,JSON.stringify({week}));}

function renderDays(){
  dayList.innerHTML="";
  days.forEach(d=>{
    const div=document.createElement("div");
    div.textContent=d;div.className="day-btn"+(d===activeDay?" active":"");
    div.onclick=()=>{activeDay=d;renderPanel();renderDays();};
    dayList.appendChild(div);
  });
}

function renderPanel(){
  panel.innerHTML=""; weekNum.textContent=week;
  EXS.filter(e=>e.day===activeDay).forEach(ex=>{
    const card=document.createElement("div"); card.className="exercise";
    card.innerHTML=`<div class="ex-head"><strong>${ex.name}</strong><span class="small">(${ex.range})</span></div>`;
    // warm-up
    card.appendChild(setRow("W",ex.id,week,"warm"));
    const sets=(week>=3?3:2);
    for(let s=1;s<=sets;s++) card.appendChild(setRow(s,ex.id,week,s));
        panel.appendChild(card);
  });
}

function setRow(label,eid,wk,set){
  const row=document.createElement("div"); row.className="set-row";
  const key=`${wk}_${eid}_${set}`;
  const data=(logs[key]||{weight:"",reps:""});
  row.innerHTML=`<div class="small">${label}</div>
    <input class="input" placeholder="kg" value="${data.weight||""}">
    <input class="input" placeholder="reps" value="${data.reps||""}">`;
  const [w,r]=row.querySelectorAll("input");
  w.onchange=r.onchange=()=>{
    logs[key]={weight:w.value,reps:r.value};
    save();
  };
  return row;
}

// week buttons
document.getElementById("prevWeek").onclick=()=>{if(week>1){week--;renderPanel();save();}};
document.getElementById("nextWeek").onclick=()=>{week++;renderPanel();save();};
document.getElementById("newWeek").onclick=()=>{week++;renderPanel();save();};

// export
document.getElementById("exportBtn").onclick=()=>{
  let csv="Week,Day,Exercise,Set,Weight,Reps\\n";
  Object.keys(logs).forEach(k=>{
    const [wk,eid,set]=k.split("_");
    const ex=EXS.find(e=>e.id===eid);
    csv+=`${wk},${ex.day},${ex.name},${set},${logs[k].weight},${logs[k].reps}\\n`;
  });
  const blob=new Blob([csv],{type:"text/csv"});
  const url=URL.createObjectURL(blob);
  const a=document.createElement("a");a.href=url;a.download="log.csv";a.click();
  URL.revokeObjectURL(url);
};

// import
document.getElementById("importBtn").onchange=e=>{
  const f=e.target.files[0]; if(!f)return;
  const reader=new FileReader();
  reader.onload=ev=>{
    try{logs=JSON.parse(ev.target.result);save();renderPanel();alert("Import ok");}
    catch{alert("Bad JSON");}
  };
  reader.readAsText(f);
};

renderDays();renderPanel();
</script>
</body>
</html>
